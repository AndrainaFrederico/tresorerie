{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau de bord</title>
    <script src="{% static 'js/jquery-3.7.1.min.js' %}"></script>
    <script src="{% static 'js/datatable/dataTables.js' %}"></script>
    <script src="{% static 'js/datatable/dataTables.responsive.js' %}"></script>
    <script src="{% static 'js/script.js' %}"></script>
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}"/>
    <link rel="stylesheet" href="{% static 'css/dataTables.dataTables.css' %}" />
    <link rel="stylesheet" href="{% static 'css/add.css' %}">
    
</head>
<body>
    <div class="container">
        <aside>
            <div class="top">
                <div class="logo">
                    <img src="{% static 'images/logo/dashboard.png' %}" alt="logo">
                    <h2>TRESORERIE</h2>
                </div>
                <div class="close" id="close-btn">
                    <span class="material-icons-sharp" ><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></span>
                </div>
            </div>
            <div class="sidebar">
                <a href="#" onclick="showContent('dashboard', this)" class="active">
                    <span><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M520-600v-240h320v240H520ZM120-440v-400h320v400H120Zm400 320v-400h320v400H520Zm-400 0v-240h320v240H120Zm80-400h160v-240H200v240Zm400 320h160v-240H600v240Zm0-480h160v-80H600v80ZM200-200h160v-80H200v80Zm160-320Zm240-160Zm0 240ZM360-280Z"/></svg></span>
                    <h3>Dashboard</h3>
                </a>
                <a href="#" onclick="showContent('caisse', this)">
                    <span class="material-icons-sharp" ><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M640-520q17 0 28.5-11.5T680-560q0-17-11.5-28.5T640-600q-17 0-28.5 11.5T600-560q0 17 11.5 28.5T640-520Zm-320-80h200v-80H320v80ZM180-120q-34-114-67-227.5T80-580q0-92 64-156t156-64h200q29-38 70.5-59t89.5-21q25 0 42.5 17.5T720-820q0 6-1.5 12t-3.5 11q-4 11-7.5 22.5T702-751l91 91h87v279l-113 37-67 224H480v-80h-80v80H180Zm60-80h80v-80h240v80h80l62-206 98-33v-141h-40L620-720q0-20 2.5-38.5T630-796q-29 8-51 27.5T547-720H300q-58 0-99 41t-41 99q0 98 27 191.5T240-200Zm240-298Z"/></svg></span>
                    <h3>Caisse</h3>
                </a>
                <a href="#" onclick="showContent('grande-caisse', this)">
                    <span class="material-icons-sharp" ><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" ><path d="M444-200h70v-50q50-9 86-39t36-89q0-42-24-77t-96-61q-60-20-83-35t-23-41q0-26 18.5-41t53.5-15q32 0 50 15.5t26 38.5l64-26q-11-35-40.5-61T516-710v-50h-70v50q-50 11-78 44t-28 74q0 47 27.5 76t86.5 50q63 23 87.5 41t24.5 47q0 33-23.5 48.5T486-314q-33 0-58.5-20.5T390-396l-66 26q14 48 43.5 77.5T444-252v52Zm36 120q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg></span>
                    <h3>Grande Caisse</h3>
                </a>
                <a href="#" onclick="showContent('petite-caisse', this)">
                    <span class="material-icons-sharp" ><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M560-440q-50 0-85-35t-35-85q0-50 35-85t85-35q50 0 85 35t35 85q0 50-35 85t-85 35ZM280-320q-33 0-56.5-23.5T200-400v-320q0-33 23.5-56.5T280-800h560q33 0 56.5 23.5T920-720v320q0 33-23.5 56.5T840-320H280Zm80-80h400q0-33 23.5-56.5T840-480v-160q-33 0-56.5-23.5T760-720H360q0 33-23.5 56.5T280-640v160q33 0 56.5 23.5T360-400Zm440 240H120q-33 0-56.5-23.5T40-240v-440h80v440h680v80ZM280-400v-320 320Z"/></svg></span>
                    <h3>Petite Caisse</h3>
                </a>
                <a href="{% url 'logout' %}">
                    <span><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h280v80H200Zm440-160-55-58 102-102H360v-80h327L585-622l55-58 200 200-200 200Z"/></svg></span>
                    <h3>Deconnexion</h3>
                </a>
            </div>
        </aside>
        <main>
            {% block content %}
            <!-- Le contenu spécifique à chaque utilisateur sera inclus ici -->
            {% endblock %}
        </main>
        <div class="right">
            <div class="top">
                <button id="menu-btn">
                    <span><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"/></svg></span>
                </button>
                <div class="theme-toggler">
                    <span class="active"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" style="fill: #fff;"><path d="M480-360q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Zm0 80q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 100-52 56Zm492 496-97-101 53-55 101 97-57 59Zm-98-550 97-101 59 57-100 96-56-52ZM154-212l101-97 55 53-97 101-59-57Zm326-268Z"/></svg></span>
                    <span><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" style="fill: var(--color-dark);"><path d="M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Zm0-80q88 0 158-48.5T740-375q-20 5-40 8t-40 3q-123 0-209.5-86.5T364-660q0-20 3-40t8-40q-78 32-126.5 102T200-480q0 116 82 198t198 82Zm-10-270Z"/></svg></span>
                </div>
                <div class="profile">
                    <div class="info">
                        <p>Hey</p>
                        {% if user.is_authenticated and user.is_superuser %}
                            <small class="text-muted"><b>Admin</b></small>
                        {% endif %}
                        {% if user.is_authenticated and not user.is_superuser %}
                            <small class="text-muted"><b>Users</b></small>
                        {% endif %}
                    </div>
                    <div class="profile-photo">
                        <img src="{% static 'images/logo/profile.png' %}" alt="">
                    </div>
                </div>
            </div>
            <!--END OF TOP-->
            <div class="recent-updates">
                <h2>Nos Projet</h2>
                <div class="updates">
                    <div class="update">
                        <div class="profile-photo">
                            <img src="{% static 'images/logo/new.png' %}" alt="">
                        </div>
                        <div class="message">
                            <p><b>Projet En cours</b><br>Fanorenana Trano Manolotrony</p>
                            <small class="text-muted">15/02/24</small>
                        </div>
                    </div>
                    <div class="update">
                        <div class="profile-photo">
                            <img src="{% static 'images/logo/new.png' %}" alt="">
                        </div>
                        <div class="message">
                            <p><b>Projet En cours</b><br>Fanorenana Estrade</p>
                            <small class="text-muted">15/02/24</small>
                        </div>
                    </div>
                </div>
            </div>
            <!--END OF RECENT UPDATES-->
            <div class="sales-analytics">
                <h2>Besoin Fiangonana</h2>
                <div class="item online">
                    <div class="icon">
                        <span><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" ><path d="M200-280v-280h80v280h-80Zm240 0v-280h80v280h-80ZM80-120v-80h800v80H80Zm600-160v-280h80v280h-80ZM80-640v-80l400-200 400 200v80H80Zm178-80h444-444Zm0 0h444L480-830 258-720Z"/></svg></span>
                    </div>
                    <div class="right">
                        <div class="info">
                            <h3>Sonorisation</h3>
                            <small class="text-muted">15/12/25</small>
                        </div>
                    </div>
                </div>
                <div class="item online">
                    <div class="icon">
                        <span><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" ><path d="M200-280v-280h80v280h-80Zm240 0v-280h80v280h-80ZM80-120v-80h800v80H80Zm600-160v-280h80v280h-80ZM80-640v-80l400-200 400 200v80H80Zm178-80h444-444Zm0 0h444L480-830 258-720Z"/></svg></span>
                    </div>
                    <div class="right">
                        <div class="info">
                            <h3>Sonorisation</h3>
                            <small class="text-muted">15/12/25</small>
                        </div>
                    </div>
                </div>
                <div class="item online">
                    <div class="icon">
                        <span><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" ><path d="M200-280v-280h80v280h-80Zm240 0v-280h80v280h-80ZM80-120v-80h800v80H80Zm600-160v-280h80v280h-80ZM80-640v-80l400-200 400 200v80H80Zm178-80h444-444Zm0 0h444L480-830 258-720Z"/></svg></span>
                    </div>
                    <div class="right">
                        <div class="info">
                            <h3>Sonorisation</h3>
                            <small class="text-muted">15/12/25</small>
                        </div>
                    </div>
                </div>
                {% if user.is_authenticated and user.is_superuser %}
                <div class="item add-product">
                    <div>
                        <span>
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
                                <path d="M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z"/>
                            </svg>
                        </span>
                        <h3>Ajouter Projet</h3>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</body>
<script>
const sideMenu = document.querySelector("aside");
const menuBtn = document.querySelector("#menu-btn");
const closeBtn = document.querySelector("#close-btn");
const themeToggler = document.querySelector(".theme-toggler");

menuBtn.addEventListener('click', () =>{
    sideMenu.style.display='block';
})

closeBtn.addEventListener('click', () =>{
    sideMenu.style.display='none';
})

themeToggler.addEventListener('click', () =>{
    document.body.classList.toggle('dark-theme-variables');
    themeToggler.querySelector('span:nth-child(1)').classList.toggle('active');
    themeToggler.querySelector('span:nth-child(2)').classList.toggle('active');
})


document.addEventListener('DOMContentLoaded', () => {
    // Affiche le Dashboard par défaut
    const defaultLink = document.querySelector('.sidebar a:first-child');
    showContent('dashboard', defaultLink);
});

function showContent(sectionId, linkElement) {
    // Masquer toutes les sections
    const sections = document.querySelectorAll('.content-section');
    sections.forEach(section => section.style.display = 'none');

    // Afficher la section correspondante
    document.getElementById(sectionId).style.display = 'block';

    // Supprimer l'état actif de tous les liens du menu
    const links = document.querySelectorAll('.sidebar a');
    links.forEach(link => link.classList.remove('active'));

    // Ajouter la classe active au lien cliqué
    linkElement.classList.add('active');
}

$(document).ready(function () {
    $(".datatable").DataTable({
      language: {
        url: "{% static 'js/langue/fr_fr.json' %}",
      },
      pageLength: 15,
      lengthMenu: [5, 10, 25, 50, 100],
      order: [[0, "asc"]],
      searching: true,
      paging: true,
      info: true,
    });
  });

</script>


</html>
